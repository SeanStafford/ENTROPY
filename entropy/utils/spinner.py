#!/usr/bin/env python3
import time
import sys

# Define different spinner character sets
SPINNER_OPTIONS = {
    1: {
        'name': 'Classic',
        'frames': ['|', '/', '-', '\\']
    },
    2: {
        'name': 'Dots',
        'frames': ['⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏']
    },
    3: {
        'name': 'Star',
        'frames': ['✶', '✸', '✹', '✺', '✹', '✸']
    },
    4: {
        'name': 'Combo',
        'frames': ['\\', '\\', '\\', '\\', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '\\', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '\\', '⠡', '⠡', '⠩', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠁', '⠉', '⠑', '⠡', '⠡', '\\', '\\', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '\\', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '-', '/', '|', '\\', '\\', '⠡', '⠡', '⠩', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠁', '⠉', '⠑', '⠡', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '\\', '|', '/', '-', '⠡', '⠩', '⠹', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏', '⠋', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠉', '⠙', '⠹', '⠽', '⠿', '⠷', '⠇', '⠃', '⠁', '⠁', '⠁', '✶', '✸', '✹', '✸', '✶', '✸', '✹', '✸', '✶', '✸', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✹', '✺', '✹', '✸', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✹', '✺', '✹', '✸', '✶', '✸', '✹', '✺', '✹', '✸', '✶', '✶', '⠁', '⠉', '⠑', '⠡', '⠡']
    },
}

def move_cursor_up(lines):
    """Move cursor up by specified number of lines"""
    sys.stdout.write(f'\033[{lines}A')
    sys.stdout.flush()

def display_menu():
    """Display the spinner selection menu"""
    print("Select a spinner style:\n")
    for num, spinner in SPINNER_OPTIONS.items():
        frames_preview = ' '.join(spinner['frames']) if len(spinner['frames']) <20 else "?"
        print(f"{num}. {spinner['name']}: {frames_preview}")
    print()

def animate_spinner(spinner_frames, duration=300):
    """Animate the head with spinner at top right"""
    frame_idx = 0
    start_time = time.time()
    first_frame = True

    while time.time() - start_time < duration:
        spinner_char = spinner_frames[frame_idx % len(spinner_frames)]

        # Build the head with current spinner character (no leading newline)
        head = f"""    -----   
  /       {spinner_char}  
  ⎸       ⎹  
  \\       /  
   ˙˳˳˳˳˳˙   
   ╱  ⧫  ╲   
  ╱   ▲   ╲  

Thinking..."""

        # Move cursor up to overwrite previous output (except first time)
        if not first_frame:
            move_cursor_up(9)  # 7 lines for head + 1 blank + 1 for "Thinking..."

        print(head)
        first_frame = False

        frame_idx += 1
        time.sleep(0.1)

    # Overwrite with final message
    move_cursor_up(9)
    print("    -----       ")
    print("  /       ✓     ")
    print("  ⎸       ⎹     ")
    print("  \\       /     ")
    print("   ˙˳˳˳˳˳˙      ")
    print("   ╱  ⧫  ╲      ")
    print("  ╱   ▲   ╲     ")
    print("                ")
    print("Done!           ")

def main():
    display_menu()

    try:
        choice = int(input("Enter number (1-4): "))
        if choice not in SPINNER_OPTIONS:
            print("Invalid selection!")
            sys.exit(1)

        spinner_frames = SPINNER_OPTIONS[choice]['frames']
        print(f"\nStarting {SPINNER_OPTIONS[choice]['name']} spinner...\n")
        time.sleep(1)

        animate_spinner(spinner_frames)

    except ValueError:
        print("Please enter a valid number!")
        sys.exit(1)
    except KeyboardInterrupt:
        print("\n\nStopped.")
        sys.exit(0)

if __name__ == "__main__":
    main()

